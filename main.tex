\documentclass[14pt]{extarticle}
\usepackage[utf8]{inputenc}
\usepackage[czech]{babel}
\usepackage[T1]{fontenc}
\usepackage{comment}
\usepackage{etoolbox} % freaking toc
\usepackage{ifthen}
\usepackage{xspace}
\usepackage{xcolor}
\usepackage{float}
\usepackage{chordbox}
\usepackage{tikz}
\usepackage{xifthen}
\usepackage{pgf}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{tabularx}
\usepackage{multicol}
\usepackage{xparse} % NewDocumentCommand
\usepackage{csquotes}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{censor} % for █████████████
\usepackage{pifont} % for solo versestyle star

%%% Style %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newboolean{showchords}
\newboolean{showoptionalchords}
\newboolean{iscompact}

\setboolean{showchords}{true}
\setboolean{showoptionalchords}{false}
\setboolean{iscompact}{false}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifthenelse{\boolean{iscompact}}{
    \newcommand{\leftpadding}{1.25cm}
    \renewcommand{\baselinestretch}{1.15} 
    \usepackage[paper=a5paper, nohead, bottom=1cm, top=0.5cm, left=0cm, right=0.5cm, footskip=0.5cm]{geometry}
  }{
    \newcommand{\leftpadding}{1cm}
    \renewcommand{\baselinestretch}{1.25} 
    \usepackage[paper=a5paper, nohead, bottom=1.25cm, top=1cm, left=0cm, right=0.75cm, footskip=0.5cm]{geometry}
  }

\newcommand{\setgeometry}{
  \ifthenelse{\boolean{iscompact}}{
    \renewcommand{\leftpadding}{0.75cm}
    \renewcommand{\baselinestretch}{1.15} 
    \newgeometry{paper=a5paper, nohead, bottom=1cm, top=0.5cm, left=0cm, right=0.5cm, footskip=0.5cm}
               }{
    \renewcommand{\leftpadding}{1.25cm}
    \renewcommand{\baselinestretch}{1.15} 
    \newgeometry{paper=a5paper, nohead, bottom=1.25cm, top=1cm, left=0cm, right=0.75cm, footskip=0.5cm}
               }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{imakeidx}
\usepackage{hyperref}
%\usepackage[default,regular,bold]{sourceserifpro}
\usepackage[t,lf]{spectral}
%\usepackage{fontspec}
%\setmainfont{QTHeidelbergType}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\input{covers.tex}

%\makeindex

\usepackage{leadsheets} % the following lines fix problems with newer latex
\setleadsheets{align-chords={l}}
\definesongtitletemplate{empty}{} 
\setleadsheets{disable-measuring = true}
\ExplSyntaxOn
    \UseName{prop_new:c}{l__leadsheets_songs_height_prop}
\ExplSyntaxOff
\definesongtitletemplate{empty}{
  % an “empty” template: do nothing for title
}

\title{Střediskový zpěvník}
\author{José Smutný}
\date{November 2025}

\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[R]{\thepage}
\setlength{\parindent}{0cm}

\newcommand{\importsong}[1]{\input{songs/#1}}

\input{utilities.tex}
\input{chords.tex}

\input{toc.tex}

\begin{document}

\newversetype{refren}
\newversetype{deco}
\setleadsheets{
  title-template = empty,
  after-title = \vspace{0pt},
  before-song = \vspace{0pt},
  refren/numbered=false,
  refren/name=R,
  refren/after-label=.,
  refren/label-format=\bfseries,
  deco/numbered=false,
  deco/name= \ding{107},
  deco/after-label=,
  deco/label-format=,  % TODO: shouldn't be too visually bold
  solo/numbered=false,
  solo/name=,
  solo/after-label=,
  verse/numbered=true,
%  smash-chords = true
}
\setchords{
  format = \bfseries,
  input-notation = {german},
  output-notation = {german}
}

%\subsectiontoc
X
\pagebreak

\setboolean{showchords}{true}
\setboolean{showoptionalchords}{false}
\setboolean{iscompact}{false}
\setgeometry
\importsong{preview.tex}

\setboolean{showchords}{true}
\setboolean{showoptionalchords}{true}
\setboolean{iscompact}{true}
\setgeometry
\importsong{preview.tex}


\setboolean{showchords}{false}
\setboolean{showoptionalchords}{false}
\setboolean{iscompact}{false}
\setgeometry
\importsong{preview.tex}

%\subsectiontoc
\end{document}

